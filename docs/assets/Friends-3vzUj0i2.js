import{b,i as U,s as F,g as S,_ as $,N as x,f as L,a as R,e as z,u as P,d as B,h as w,H as C,k as c,l as G,F as M}from"./index-D6Hz3-vS.js";import{j as p,r as m,o as D,K as h,O as v,L as t,M as e,S as g,Q as I,R as o,J as s,F as N,W as T,e as j}from"./vue-DM6FGnPB.js";import{i as V}from"./infiniteScroll-CP5iaxsj.js";import"./domPurify-BPcjySmD.js";const E={style:{padding:"0px 10px"}},H=["src"],O={class:"info"},Q={class:"username"},A={class:"signature"},J={class:"icon"},K=["src"],W=p({__name:"item",props:{user:{}},setup(n){const a=m(b("/@base/assets/user/Status-None.png")),r=U(n.user);async function i(){const l=await S("/Users/GetUser",{ID:n.user.ID});return u(Number(l.Data.Relation))}function u(l){switch(l){case 1:return"/@base/assets/user/Status-Following.png";case 2:return"/@base/assets/user/Status-Followed.png";case 3:return"/@base/assets/user/Status-Friend.png";default:return"/@base/assets/user/Status-None.png"}}return D(async()=>{const l=await i();a.value=b(l)}),(l,d)=>(v(),h("div",E,[t("div",{class:"user-item",onClick:d[0]||(d[0]=_=>e(F)(n.user.ID))},[t("img",{class:"avatar",src:e(r)},null,8,H),t("div",O,[t("div",Q,g(n.user.Nickname),1),t("div",A,g(n.user.Signature||l.$t("user.noSignature")),1)]),t("div",J,[t("img",{src:a.value},null,8,K)])])]))}}),q=$(W,[["__scopeId","data-v-e677c4a0"]]),f=p({__name:"list",props:{userid:String,type:String,cols:Number},setup(n){let a=m(!1),r=m(0),i=m(!1),u=m(!1);const l=m([]);async function d(){if(!n.userid||a.value)return;if(a.value=!0,i.value){u.value||L.emit("warning","没有更多了",1),u.value=!0;return}const _=await S("/Users/GetRelations",{UserID:n.userid,DisplayType:n.type,Skip:r.value,Take:24,Query:""});i.value=_.Data.$values.length<24,a.value=!1,r.value+=24,l.value=[...l.value,..._.Data.$values]}return window.$Logger.logPageView({pageLink:"/Social/Friends/".concat(Number(n.type),"/"),timeStamp:Date.now()}),d(),(_,ne)=>(v(),I(V,{"initial-items":l.value,"has-more":!e(i),"margin-top":-200,onLoad:d},{default:o(({items:k})=>[s(e(x),{cols:n.cols||2},{default:o(()=>[(v(!0),h(N,null,T(k,y=>(v(),I(e(R),{key:y.User.ID},{default:o(()=>[s(q,{user:y.User},null,8,["user"])]),_:2},1024))),128))]),_:2},1032,["cols"])]),_:1},8,["initial-items","has-more"]))}}),X={class:"list"},Y={class:"item"},Z={class:"item"},ee={class:"item"},se={class:"item"},te={class:"item"},ae={class:"item"},ie=p({__name:"Friends",setup(n){var u;const a=(u=z.getObj("userInfo").value)==null?void 0:u.id,{friendItemsPerRow:r}=P(),{t:i}=B();return j(w),D(w),(l,d)=>(v(),h(N,null,[s(C,null,{default:o(()=>[t("h1",null,g(e(i)("friends.title")),1)]),_:1}),t("div",X,[s(e(G),{"default-value":"following","justify-content":"space-evenly",type:"line"},{default:o(()=>[s(e(c),{name:"following",tab:e(i)("friends.following"),"display-directive":"show:lazy"},{default:o(()=>[t("div",Y,[s(f,{userid:e(a),type:"1",cols:e(r)},null,8,["userid","cols"])])]),_:1},8,["tab"]),s(e(c),{name:"follower",tab:e(i)("friends.follower"),"display-directive":"show:lazy"},{default:o(()=>[t("div",Z,[s(f,{userid:e(a),type:"0",cols:e(r)},null,8,["userid","cols"])])]),_:1},8,["tab"]),s(e(c),{name:"volunteers",tab:e(i)("friends.volunteers"),"display-directive":"show:lazy"},{default:o(()=>[t("div",ee,[s(f,{userid:e(a),type:"3",cols:e(r)},null,8,["userid","cols"])])]),_:1},8,["tab"]),s(e(c),{name:"editors",tab:e(i)("friends.editors"),"display-directive":"show:lazy"},{default:o(()=>[t("div",se,[s(f,{userid:e(a),type:"4",cols:e(r)},null,8,["userid","cols"])])]),_:1},8,["tab"]),s(e(c),{name:"en",tab:e(i)("friends.retired"),"display-directive":"show:lazy"},{default:o(()=>[t("div",te,[s(f,{userid:e(a),type:"5",cols:e(r)},null,8,["userid","cols"])])]),_:1},8,["tab"]),s(e(c),{name:"baned",tab:e(i)("friends.baned"),"display-directive":"show:lazy"},{default:o(()=>[t("div",ae,[s(f,{userid:e(a),type:"2",cols:e(r)},null,8,["userid","cols"])])]),_:1},8,["tab"])]),_:1})]),s(M)],64))}}),de=$(ie,[["__scopeId","data-v-d008e612"]]);export{de as default};
