import{_ as $}from"./Navigation-Return-CUJ0SQdH.js";import{d as k,M as U,n as L,b as i,c as u,f as t,u as d,C as y,O as x,_ as p,r as _,e as f,w as h,h as C,g as E,l as S,F as D,i as N,j as b,N as j,L as A,E as B,a as R,o as T,H as W,A as q}from"./index-gB8lYAtT.js";const M={class:"cover"},P=["src"],V={class:"info"},z={class:"title"},F={class:"user"},G={class:"avartar"},O=["src"],H={class:"name"},Q=k({__name:"item",props:{item:{}},setup(e){const l=U(e.item),a=L(()=>e.item.User.Avatar===0?"/assets/user/default-avatar.png":`/static/users/avatars/${e.item.User.ID.slice(0,4)}/${e.item.User.ID.slice(4,6)}/${e.item.User.ID.slice(6,8)}/${e.item.User.ID.slice(8,24)}/${e.item.User.Avatar}.jpg!tiny.round`),r=()=>{x.push(`/ExperimentSummary/${e.item.Category}/${e.item.ID}`)};return(s,c)=>(i(),u("div",{class:"work-box",onClick:r},[t("div",M,[t("img",{src:d(l),alt:""},null,8,P)]),t("div",V,[t("div",z,y(s.item.Subject),1),t("div",F,[t("div",G,[t("img",{src:a.value,alt:"item.User.Nickname"},null,8,O)]),t("div",H,y(s.item.User.Nickname),1)])])]))}}),J=p(Q,[["__scopeId","data-v-ce372e3e"]]),K={key:0,class:"loading"},X={key:1},Y={key:0},Z=k({__name:"itemList",props:{row:Number,q:Object},setup(e){const l=_(!0),a=_([]),r=_(""),s=_(!1);let c=0,m=!1,n=!1;async function o(){var g;if(m){n||B.emit("warning","没有更多了",1),n=!0;return}if(s.value===!0)return;s.value=!0;const v=await E("/Contents/QueryExperiments",{Query:{Category:"Discussion",Languages:[],ExcludeLanguages:null,Tags:["精选"],ModelTags:null,ExcludeTags:null,ModelID:null,ParentID:null,UserID:null,Special:null,From:r.value===""?null:r.value,Skip:c,Take:24,Days:0,Sort:0,ShowAnnouncement:!1,...e.q}});v.Data.$values.length<24&&(m=!0),c+=24,a.value.push(...v.Data.$values),r.value=(g=a.value[a.value.length-1])==null?void 0:g.ID,s.value=!1}return o(),l.value=!1,(v,g)=>l.value?(i(),u("div",K)):(i(),u("div",X,[f(d(A),{distance:10,onLoad:o},{default:h(()=>[f(d(S),{cols:e.row||3,"x-gap":16,"y-gap":16,responsive:"screen"},{default:h(()=>[(i(!0),u(D,null,N(a.value,w=>(i(),b(d(j),{key:w.id},{default:h(()=>[f(J,{item:w},null,8,["item"])]),_:2},1024))),128))]),_:1},8,["cols"])]),_:1}),s.value&&!d(m)?(i(),u("div",Y,"加载中...")):C("",!0)]))}}),ee=p(Z,[["__scopeId","data-v-833d947a"]]),te={class:"list"},se=k({__name:"WorkList",setup(e){const l=q(),a=_(s());function r(n){const o=atob(n.replace(/DEVIDER/g,"/")),v=new Uint8Array([...o].map(I=>I.charCodeAt(0))),g=new TextDecoder().decode(v);return JSON.parse(g)}function s(){const n=window.innerWidth;switch(!0){case n>=1200:return 5;case n>=800:return 4;case n>=500:return 3;default:return 2}}const c=()=>{a.value=s()},m=()=>{window.history.back()};return R(()=>{window.addEventListener("resize",c)}),T(()=>{window.removeEventListener("resize",c)}),(n,o)=>(i(),u(D,null,[f(W,null,{default:h(()=>[t("img",{src:$,style:{width:"2.7em"},onClick:m}),o[0]||(o[0]=t("h2",{style:{"margin-right":"auto","margin-left":"20px"}},"作品列表",-1))]),_:1}),t("div",te,[f(ee,{row:a.value,q:r(d(l).params.config)},null,8,["row","q"])])],64))}}),re=p(se,[["__scopeId","data-v-a5ada74b"]]);export{re as default};
