import{g as i,e as o,i as l}from"./index-DNiUAM6g.js";let a=(()=>{const e=o.getObj("userIDAndAvartarIDMap");return e.status==="success"&&e.value?e.value:{}})();async function p(e,u=!0){var s,n;let r=0;if(u&&a[e]&&Math.abs(Date.now()-a[e][1])<4320*60*1e3&&a[e][0]!==void 0&&a[e][0]!==null)r=a[e][0];else try{const t=new Promise((w,c)=>{setTimeout(()=>c(new Error("请求超时")),3e4)});if(r=(n=(s=(await Promise.race([i("/Users/GetUser",{ID:e}),t])).Data)==null?void 0:s.User)==null?void 0:n.Avatar,!r)return window.$getPath("/@base/assets/user/default-avatar.png");a[e]=[r,Date.now()],o.setObj("userIDAndAvartarIDMap",a,4320*60*1e3)}catch(t){return console.error("获取头像失败",t),window.$getPath("/@base/assets/user/default-avatar.png")}return l({ID:e,Avatar:r})}export{p as g};
