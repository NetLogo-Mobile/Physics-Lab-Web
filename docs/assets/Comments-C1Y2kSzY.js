import{d as y,r as l,t as v,b as C,c as h,e as c,w,H as D,f as o,u as n,y as k,z as x,F as B,A as M,q as I,C as S,g as b,E,_ as R}from"./index-DKxEvu0V.js";import{_ as L}from"./Navigation-Return-_L3YSlCI.js";import{M as N}from"./MessageList-CIoKZzfk.js";const T="/assets/library/Button-Category.png",$={class:"header"},F={class:"title"},H={class:"list"},K={class:"sendComment"},U=y({__name:"Comments",setup(V){const s=M();let r=l(!1),m=l(""),d=l(0),p=l(`${v(s.params.name)} 的 ${s.params.category==="User"?"主页":"评论区"}`),e=l("");const g=()=>{window.history.back()};function _(t){m=t.userID,e.value=`回复@${t.msg_title}: `}const f=async()=>{r.value=!0;const t=await b("/Messages/PostComment",{TargetID:s.params.id,TargetType:s.params.category,Content:e.value||"",ReplyID:m||"",Language:"from web",Special:null});if(t.Status==200)e.value="",d.value=Math.random();else if(t.Status==403&&t.Message.startsWith("Stopword.Blocked")){const a=Number("Stopword.Blocked.Details|0".slice("Stopword.Blocked.Details|0".indexOf("|")+1)),i=e.value.slice(a,10);E.emit("error",`您输入的内容“...${i}...”中包含不适合词句`,1)}r.value=!1};return(t,a)=>{const i=I("n-input");return C(),h(B,null,[c(D,null,{default:w(()=>[o("div",$,[o("img",{src:L,style:{width:"3em"},onClick:g}),o("div",F,S(n(p)),1),a[1]||(a[1]=o("img",{src:T,style:{width:"3em","margin-left":"auto"}},null,-1))])]),_:1}),o("div",H,[c(N,{Category:n(s).params.category,ID:n(s).params.id,upDate:n(d),onMsgClick:_},null,8,["Category","ID","upDate"])]),o("div",K,[c(i,{value:n(e),"onUpdate:value":a[0]||(a[0]=u=>k(e)?e.value=u:e=u),style:{"text-align":"left"},type:"text",placeholder:"发布一条友善的言论","show-count":"",maxlength:300,onKeyup:x(f,["enter"]),loading:n(r)},null,8,["value","loading"])])],64)}}}),O=R(U,[["__scopeId","data-v-c8ade579"]]);export{O as default};
