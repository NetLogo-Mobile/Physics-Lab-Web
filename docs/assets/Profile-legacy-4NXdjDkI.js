System.register(["./vue-legacy-BtgHrQi9.js","./Navigation-Return-legacy-DbwkFzz0.js","./index-legacy-Jyate2Ug.js","./actionSheet-legacy-RwJl6Yj0.js","./postComment-legacy-D8MYM2lR.js","./domPurify-legacy-Dg5y-r5Q.js","./markdown-legacy-Dh81xztX.js","./heilight-legacy-Cwe93Xj1.js","./katex-legacy-DddRk6EY.js","./system.config-legacy-DYuK43nm.js","./getUserCurentAvatarByID-legacy-CEaopGCK.js","./infiniteScroll-legacy-D9EtErDf.js"],function(e,t){"use strict";var a,i,o,n,r,l,s,c,u,d,p,g,m,v,y,f,b,x,h,w,C,k,D,U,I,j,S,$,P,_,E,L,F,z,N;return{setters:[e=>{a=e.j,i=e.r,o=e.o,n=e.a2,r=e.Q,l=e.R,s=e.L,c=e.J,u=e.M,d=e.K,p=e.W,g=e.F,m=e.P,v=e.a3,y=e.I,f=e.X,b=e.S,x=e.U,h=e.O},e=>{w=e._},e=>{C=e.d,k=e.g,D=e.j,U=e.i,I=e.k,j=e.l,S=e.f,$=e.c,P=e.E,_=e._},e=>{E=e.T,L=e.A,F=e.s},e=>{z=e.M,N=e.p},null,null,null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".cover[data-v-69889b1b]{position:absolute;height:100%;width:100%;padding:20px}.projects[data-v-69889b1b]{position:absolute;width:95%;height:calc(100% - 50px);margin:5px;display:flex;flex-direction:column;gap:5px;overflow-y:scroll;padding-bottom:50px;scrollbar-width:none}.coverProject[data-v-69889b1b]{position:absolute;bottom:30px;left:20px;right:20px;color:#fff;height:55px;background-color:rgba(128,128,128,.4);border-radius:10px;padding:8px}@media (max-aspect-ratio: 1/1){.return[data-v-69889b1b]{display:none}}div[data-v-69889b1b]{box-sizing:border-box}\n/*$vite$:1*/",document.head.appendChild(t);const R={style:{"text-align":"left","z-index":"10",position:"relative"}},T={key:0,class:"coverProject coverBottom"},A={style:{margin:"0","font-size":"smaller"}},V={style:{margin:"0","font-size":"medium"}},B={style:{"text-align":"center",height:"100%"}},G={id:"project-list",class:"projects"},M={class:"right-bottom-container"},K={class:"message-wrapper"},O={class:"sendComment"};e("default",_(a({__name:"Profile",setup(e){const{t:t}=C();let a=i(""),_=i(!1),q=i(1),J=i("");const Q=i("Intro"),W=n();let X=i(""),H=i({User:{ID:"",Nickname:"Loading...",Signature:"",Verification:"loading...",Avatar:322,AvatarRegion:0,Decoration:0,Gold:17900,Diamond:2683,Fragment:116,Level:25,Experience:62225,Prestige:18,Subscription:1,SubscriptionUntil:"",IsBinded:!0,Regions:[1]},Statistic:{Cover:{ID:"",Category:"",Subject:"",Image:1},CommentCount:0,ExperimentCount:0,FollowerCount:0,FollowingCount:0}}),Y=i({});function Z(e){J.value=e.userID,a.value=`回复@${e.msg_title}: `}async function ee(){await N(a,_,"User",W.params.id,J,q)}function te(){window.history.back()}function ae(e){switch(e){case"Latest-Experiments":return`experiments://UserID/${W.params.id}`;case"Featured-Experiments":return`experiments://UserID/${W.params.id}/Tags/精选`;case"Latest-Discussions":return`discussions://UserID/${W.params.id}`;case"Featured-Discussions":return`discussions://UserID/${W.params.id}/Tags/精选`;case"Popular-Discussions":return`discussions://UserID/${W.params.id}/Sort/2`;case"Popular-Experiments":return`experiments://UserID/${W.params.id}/Sort/2`;default:return`discussions://user${W.params.id}`}}function ie(e){navigator.clipboard.writeText(e).then(()=>{S.emit("info","copied",1)}).catch(e=>{S.emit("error","failed to copy text",2,e)})}return o(async()=>{const e=await k("/Contents/GetProfile",{ID:W.params.id});Y.value=e.Data.Experiments;const t=await k("/Users/GetUser",{ID:W.params.id});H.value=t.Data;const a=H.value.Statistic.Cover?D(H.value.Statistic.Cover):U(t.Data.User);await fetch(a,{referrerPolicy:"no-referrer",mode:"no-cors"}),X.value=a,window.$Logger.logPageView({pageLink:`/User/${W.params.id}/`,timeStamp:Date.now()})}),(e,i)=>{const o=m("router-link"),n=m("n-input");return h(),r(L,null,{left:l(()=>{var e,a,n,r,p;return[s("div",{class:"cover",style:x({backgroundImage:`url(${u(X)})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"})},[s("div",R,[s("img",{src:w,style:{width:"2.7em"},class:"return",onClick:te}),s("div",{style:{color:"white","font-size":"2em","text-align":"left"},onClick:i[0]||(i[0]=e=>{F([{label:t("profile.copyID")},{label:t("profile.copyInternalLink")},{label:t("profile.copyExternalLink")}],e=>{0===e?ie(H.value.User.ID):1===e?ie(`<user=${H.value.User.ID}>${H.value.User.Nickname}</user>`):2===e&&ie(`<external=${window.location.href}>${H.value.User.Nickname}[web]</external>`)})})},b(u(H).User.Nickname),1),c(E,{category:"User",tag:null!==(e=u(H).User)&&void 0!==e&&e.Verification?"C-"+(null===(a=u(H).User)||void 0===a?void 0:a.Verification):"C-user",style:{color:"aquamarine","font-weight":"bold"}},null,8,["tag"]),c(E,{category:"User",tag:u(t)("profile.fans",{count:u(H).Statistic.FollowerCount})},null,8,["tag"]),c(E,{category:"User",tag:u(t)("profile.follows",{count:u(H).Statistic.FollowingCount})},null,8,["tag"])]),null!==(n=u(H).Statistic)&&void 0!==n&&n.Cover?(h(),d("div",T,[c(o,{to:"/experimentSummary/"+(null===(r=u(H).Statistic.Cover)||void 0===r?void 0:r.Category)+"/"+(null===(p=u(H).Statistic.Cover)||void 0===p?void 0:p.ID),style:{color:"white","text-align":"left","text-decoration":"none","z-index":"30",position:"relative"}},{default:l(()=>{var e;return[s("p",A,b(u(t)("profile.coverTip")),1),s("p",V,b(null===(e=u(H).Statistic.Cover)||void 0===e?void 0:e.Subject),1)]}),_:1},8,["to"])])):f("",!0)],4)]}),right:l(()=>[s("div",B,[c(u(j),{value:Q.value,"onUpdate:value":i[2]||(i[2]=e=>Q.value=e),"justify-content":"space-evenly",type:"line"},{default:l(()=>[c(u(I),{name:"Intro",tab:u(t)("profile.works"),animated:""},{default:l(()=>[s("div",G,[(h(!0),d(g,null,p(Object.entries(u(Y)),([e,t])=>(h(),d("div",{key:e},[t.length>0?(h(),r($,{key:0,title:e,data:t,"block-type":t[0].Category,link:u(P)(ae(e))},null,8,["title","data","block-type","link"])):f("",!0)]))),128))])]),_:1},8,["tab"]),c(u(I),{name:"Comment",tab:u(t)("profile.comments",{count:u(H).Statistic.CommentCount})},{default:l(()=>[s("div",M,[s("div",K,[c(z,{ID:u(W).params.id,Category:"User",upDate:u(q),onMsgClick:Z},null,8,["ID","upDate"])]),s("div",O,[c(n,{value:u(a),"onUpdate:value":i[1]||(i[1]=e=>y(a)?a.value=e:a=e),style:{"text-align":"left"},type:"text",placeholder:"发布一条友善的言论","show-count":"",maxlength:300,loading:u(_),onKeyup:v(ee,["enter"])},null,8,["value","loading"])])])]),_:1},8,["tab"])]),_:1},8,["value"])])]),_:1})}}}),[["__scopeId","data-v-69889b1b"]]))}}});
