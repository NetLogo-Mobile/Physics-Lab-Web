import{_ as C}from"./Navigation-Return-CUJ0SQdH.js";import{u as S,j as U,i as b,n as $,r as j,_ as k,N as q,g as B,f as E,a as W,H as T,q as H}from"./index-D6Hz3-vS.js";import{j as y,K as f,O as r,L as s,M as e,S as m,U as p,X as M,r as i,Q as N,R as d,J as v,F as I,W as P,a2 as Q}from"./vue-DM6FGnPB.js";import{i as R}from"./infiniteScroll-CP5iaxsj.js";import"./domPurify-BPcjySmD.js";const z=["src"],F={class:"time"},G={class:"info"},O={class:"title"},V={key:0,class:"user"},A=["src"],J=y({__name:"item",props:{item:{},showName:{type:Boolean}},setup(t){const{projectsHeight:l,fontSizeS:a}=S(),o=U(t.item),n=b(t.item.User),c=()=>{j.push("/ExperimentSummary/".concat(t.item.Category,"/").concat(t.item.ID))};return(u,g)=>(r(),f("div",{class:"work-box",onClick:c},[s("div",{class:"cover",style:p({height:e(l)})},[s("img",{src:e(o),alt:""},null,8,z),s("div",F,m(e($)(t.item.ID,!1,"date")),1)],4),s("div",G,[s("div",O,m(t.item.Subject),1),t.showName?(r(),f("div",V,[s("div",{class:"avartar",style:p({height:Number(e(a).slice(0,2))*3-20+"px",minWidth:Number(e(a).slice(0,2))*3-20+"px"})},[s("img",{src:e(n),alt:"item.User.Nickname"},null,8,A)],4),s("div",{class:"name",style:p({fontSize:e(a)})},m(t.item.User.Nickname),5)])):M("",!0)])]))}}),K=k(J,[["__scopeId","data-v-61589e43"]]),X=y({__name:"itemList",props:{row:Number,q:Object},setup(t){const l=i(!0),a=i([]),o=i(""),n=i(!1);let c=i(0),u=i(!1),g=i(!1);async function w(){var _;if(u.value){g.value=!0;return}if(n.value===!0)return;n.value=!0;const h=await B("/Contents/QueryExperiments",{Query:{Category:"Discussion",Languages:[],ExcludeLanguages:null,Tags:["精选"],ModelTags:null,ExcludeTags:null,ModelID:null,ParentID:null,UserID:null,Special:null,From:o.value===""?null:o.value,Skip:c.value,Take:24,Days:0,Sort:0,ShowAnnouncement:!1,...t.q}});h.Data.$values.length<24&&(g.value||E.emit("warning","没有更多了",1),u.value=!0),c.value+=24,a.value.push(...h.Data.$values),o.value=(_=a.value[a.value.length-1])==null?void 0:_.ID,n.value=!1}return w(),l.value=!1,(h,_)=>(r(),N(R,{"initial-items":a.value,"has-more":!e(u),onLoad:w},{default:d(({items:L})=>[v(e(q),{cols:t.row||3,"x-gap":16,"y-gap":16,responsive:"screen"},{default:d(()=>[(r(!0),f(I,null,P(L,D=>(r(),N(e(W),{key:D.ID},{default:d(()=>{var x;return[v(K,{item:D,"show-name":!((x=t.q)!=null&&x.userID)},null,8,["item","show-name"])]}),_:2},1024))),128))]),_:2},1032,["cols"])]),_:1},8,["initial-items","has-more"]))}}),Y=k(X,[["__scopeId","data-v-8813ba6a"]]),Z={style:{"margin-right":"auto","margin-left":"20px"}},ee={class:"list"},te=y({__name:"WorkList",setup(t){const l=Q(),{maxProjectsPerLine:a}=S(),o=()=>{window.history.back()};return(n,c)=>(r(),f(I,null,[v(T,null,{default:d(()=>[s("img",{src:C,style:{width:"2.7em"},onClick:o}),s("h2",Z,m(n.$t("worklist.title")),1)]),_:1}),s("div",ee,[v(Y,{row:e(a),q:e(l).params.config?e(H)(e(l).params.config):{}},null,8,["row","q"])])],64))}}),le=k(te,[["__scopeId","data-v-10c810ea"]]);export{le as default};
